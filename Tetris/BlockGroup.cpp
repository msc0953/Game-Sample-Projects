#include "stdafx.h"
#include "BlockGroup.h"

static const bool BlockIndex[Configure::BlockGroupType][4][4] =
{
	{ { 0,1,0,0 },{ 0,1,0,0 },{ 0,1,0,0 },{ 0,1,0,0 } },
	{ { 0,0,0,0 },{ 1,1,1,1 },{ 0,0,0,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,1,1,0 },{ 0,1,1,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 1,1,1,0 },{ 0,0,1,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,1,1,0 },{ 0,1,0,0 },{ 0,1,0,0 } },
	{ { 0,0,0,0 },{ 0,1,0,0 },{ 0,1,1,1 },{ 0,0,0,0 } },
	{ { 0,0,1,0 },{ 0,0,1,0 },{ 0,1,1,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,0,1,0 },{ 1,1,1,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,1,1,0 },{ 0,0,1,0 },{ 0,0,1,0 } },
	{ { 0,0,0,0 },{ 0,1,1,1 },{ 0,1,0,0 },{ 0,0,0,0 } },
	{ { 0,1,0,0 },{ 0,1,0,0 },{ 0,1,1,0 },{ 0,0,0,0 } },
	{ { 0,1,0,0 },{ 0,1,1,0 },{ 0,0,1,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,1,1,0 },{ 1,1,0,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,0,1,0 },{ 0,1,1,0 },{ 0,1,0,0 } },
	{ { 1,1,0,0 },{ 0,1,1,0 },{ 0,0,0,0 },{ 0,0,0,0 } },
	{ { 0,0,1,0 },{ 0,1,1,0 },{ 0,0,1,0 },{ 0,0,0,0 } },
	{ { 0,0,0,0 },{ 0,1,1,1 },{ 0,0,1,0 },{ 0,0,0,0 } },
	{ { 0,0,1,0 },{ 0,0,1,1 },{ 0,0,1,0 },{ 0,0,0,0 } },
	{ { 0,0,1,0 },{ 0,1,1,1 },{ 0,0,0,0 },{ 0,0,0,0 } }
};

BlockGroup::BlockGroup()
	: m_x(0), m_y(0)
{
	for (int i = 0; i < 4; i++)
		for (int j = 0; j < 4; j++)
			m_pos[i][j] = false;
}

BlockGroup::~BlockGroup()
{

}

void BlockGroup::GetBlockGroupByType(int type)
{
	for (int i = 0; i < 4; ++i)
		for (int j = 0; j<4; ++j)
			m_pos[i][j] = BlockIndex[type][i][j];
}

void BlockGroup::DrawBlock(HDC hdc)
{
	int index = 0;

	for (int i = 0; i < 4; ++i)
		for (int j = 0; j < 4; ++j)
		{
			if (m_pos[i][j])
			{
				m_block[index] = Block(i, j);
				m_block[index].draw(hdc);
				++index;
			}
		}
}

void BlockGroup::Draw(HDC hdc)
{
	this->GetBlockGroupByType(11);
	this->DrawBlock(hdc);	
}